import Header from './components/Header'
import Hero from './components/Hero'
import StatsInfo from './components/StatsInfo'
import Skills from './components/Skills'
import Experience from './components/Experience'
import Projects from './components/Projects'
import Education from './components/Education'
import Certifications from './components/Certifications'
import Contact from './components/Contact'
import Footer from './components/Footer'
import './App.css'

function App() {
  const handleNavClick = (e: React.MouseEvent<HTMLElement>, targetId: string) => {
    e.preventDefault()
    
    // Pequeno delay para garantir que o menu feche antes do scroll
    setTimeout(() => {
      const element = document.getElementById(targetId)
      if (element) {
        element.scrollIntoView({ behavior: 'smooth' })
      }
    }, 100)
  }

  const calculateDuration = (startMonth: number, startYear: number, endMonth?: number, endYear?: number) => {
    const startDate = new Date(startYear, startMonth)
    const endDate = endYear !== undefined && endMonth !== undefined ? new Date(endYear, endMonth) : new Date()
    
    let years = endDate.getFullYear() - startDate.getFullYear()
    let months = endDate.getMonth() - startDate.getMonth()

    if (months < 0) {
      years--
      months += 12
    }

    let durationStr = ''
    if (years > 0) {
      durationStr += `${years} year${years > 1 ? 's' : ''} `
    }
    if (months > 0) {
      durationStr += `${months} month${months > 1 ? 's' : ''}`
    }

    return durationStr.trim()
  }

  const experiences = [
    {
      company: "CAST",
      role: "Senior Fullstack Developer (Angular and NodeJS)",
      period: "May 2022 - Present",
      duration: calculateDuration(3, 2022),
      location: "Home office",
      description: "I worked on two strategic fronts of software engineering. As a developer on the QTeste project, I worked on an internal platform for test automation and evidence generation. Simultaneously, in the Technical Debt team, I worked on mapping and analyzing technical debt across multiple projects, helping to direct quality improvements and code sustainability to optimize Banco do Brasil's systems.",
      startMonth: 3,
      startYear: 2022,
    },
    {
      company: "Revelo",
      role: "AI Trainer",
      period: "May 2025 - June 2025",
      duration: calculateDuration(4, 2025, 5, 2025),
      location: "Home office",
      description: "Support for one of the human-generated data projects. In this role, I help improve the performance of a large language model by solving programming challenges and evaluating solutions and prompts generated by artificial intelligence.",
      startMonth: 4,
      startYear: 2025,
      endMonth: 5,
      endYear: 2025,
    },
    {
      company: "Infosys",
      role: "Senior Backend Developer (NodeJS)",
      period: "May 2021 - May 2022",
      duration: calculateDuration(4, 2021, 4, 2022),
      location: "Home office",
      description: "I worked in the backend team on a client venture called Loadshark, a cargo and freight management platform.",
      startMonth: 4,
      startYear: 2021,
      endMonth: 4,
      endYear: 2022,
    },
    {
      company: "Farma Ponte",
      role: "Senior Fullstack Developer (ReactJS)",
      period: "November 2020 - May 2021",
      duration: calculateDuration(10, 2020, 4, 2021),
      location: "Sorocaba, SP",
      description: "I worked on the company's legacy systems and also on database query and update routines using SQL Server.",
      startMonth: 10,
      startYear: 2020,
      endMonth: 4,
      endYear: 2021,
    },
    {
      company: "Grupo Soluções",
      role: "Junior Frontend Developer",
      period: "May 2020 - November 2020",
      duration: calculateDuration(4, 2020, 10, 2020),
      location: "Sorocaba, SP",
      description: "I worked on creating promotional materials for the company's social media and also developed landing pages for specific special promotions.",
      startMonth: 4,
      startYear: 2020,
      endMonth: 10,
      endYear: 2020,
    },
    {
      company: "Greenone Proximity Technology",
      role: "Junior Frontend Developer",
      period: "January 2019 - April 2020",
      duration: calculateDuration(0, 2019, 3, 2020),
      location: "Votorantim, SP",
      description: "I worked on maintenance and management of various client pages and systems.",
      startMonth: 0,
      startYear: 2019,
      endMonth: 3,
      endYear: 2020,
    },
    {
      company: "Capgemini",
      role: "Junior Infrastructure Technician",
      period: "April 2013 - January 2015",
      duration: calculateDuration(3, 2013, 0, 2015),
      location: "Votorantim, SP",
      description: "I was responsible for the IT department. I assisted in the use, maintenance, configuration and repair of the entire IT infrastructure, including thin clients, desktops and notebooks.",
      startMonth: 3,
      startYear: 2013,
      endMonth: 0,
      endYear: 2015,
    }
  ];

  const skills = [
    { category: "Frontend", items: ["React", "Angular", "Next.js", "TypeScript"] },
    { category: "Backend", items: ["Node.js", "Nest.js", "Express.js", "REST APIs"] },
    { category: "Database", items: ["PostgreSQL", "MongoDB", "MySQL", "OracleDB", "SQL Server"] },
    { category: "DevOps", items: ["Docker", "Kubernetes", "AWS", "OpenShift", "Linux"] },
    { category: "AI/ML", items: ["LLM", "MCP", "Prompt Engineering"] },
    { category: "Microservices", items: ["Microserviços", "API Gateway", "Message Queue"] }
  ];

  const education = [
    {
      institution: "UNIP - Paulista University",
      degree: "Bachelor's Degree in Computer Systems Analysis",
      period: "January 2026 - January 2028"
    },
    {
      institution: "ETEC - State Technical School of São Paulo",
      degree: "Technical Education in Information Technology/Software",
      period: "2010 - 2011"
    }
  ];

  return (
    <div className="app">
      <Header onNavClick={handleNavClick} />
    
      {/* Hero Section */}
      <main className="main">
        <Hero />
        <StatsInfo />
        <Skills skills={skills} />
        <Experience experiences={experiences} />
        <Projects />
        <Education education={education} />
        <Certifications />
        <Contact />
        <Footer />
      </main>
    </div>
  )
}

export default App
